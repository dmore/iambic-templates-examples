template_type: NOQ::AWS::IAM::ManagedPolicy
included_accounts:
  - iambic_test_spoke_account_1
identifier: CodeBuildBasePolicy-iambic_code_build-us-east-1
properties:
  description: Policy used in trust relationship with CodeBuild
  path: /service-role/
  policy_document:
    statement:
      - action:
          - logs:CreateLogGroup
          - logs:CreateLogStream
          - logs:PutLogEvents
        effect: Allow
        resource:
          - arn:aws:logs:us-east-1:{{var.account_id}}:log-group:/aws/codebuild/iambic_code_build
          - arn:aws:logs:us-east-1:{{var.account_id}}:log-group:/aws/codebuild/iambic_code_build:*
      - action:
          - s3:GetBucketAcl
          - s3:GetBucketLocation
          - s3:GetObject
          - s3:GetObjectVersion
          - s3:PutObject
        effect: Allow
        resource:
          - arn:aws:s3:::codepipeline-us-east-1-*
      - action:
          - codebuild:BatchPutCodeCoverages
          - codebuild:BatchPutTestCases
          - codebuild:CreateReport
          - codebuild:CreateReportGroup
          - codebuild:UpdateReport
        effect: Allow
        resource:
          - arn:aws:codebuild:us-east-1:{{var.account_id}}:report-group/iambic_code_build-*
    version: '2012-10-17'
  policy_name: CodeBuildBasePolicy-iambic_code_build-us-east-1

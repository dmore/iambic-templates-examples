template_type: NOQ::AWS::IAM::Role
template_schema_url: https://docs.iambic.org/reference/schemas/aws_iam_role_template
included_accounts:
  - iambic_test_org_account
identifier: NoqSpokeRoleE2E202308
properties:
  assume_role_policy_document:
    statement:
      - action:
          - sts:AssumeRole
          - sts:TagSession
        effect: Allow
        principal:
          aws: arn:aws:iam::580605962305:role/NoqCentralRoleE2E202308
    version: '2012-10-17'
  inline_policies:
    - policy_name: spoke-acct-policy
      statement:
        - action:
            - config:BatchGet*
            - config:GetResourceConfigHistory
            - config:List*
            - config:Select*
            - ec2:describeregions
            - iam:GenerateCredentialReport
            - iam:GenerateOrganizationsAccessReport
            - iam:GenerateServiceLastAccessedDetails
            - iam:GetAccessKeyLastUsed
            - iam:GetAccountAuthorizationDetails
            - iam:GetAccountSummary
            - iam:GetCredentialReport
            - iam:GetGroup
            - iam:GetGroupPolicy
            - iam:GetInstanceProfile
            - iam:GetPolicy
            - iam:GetPolicyVersion
            - iam:GetRole
            - iam:GetRolePolicy
            - iam:GetServiceLastAccessedDetails
            - iam:GetServiceLastAccessedDetailsWithEntities
            - iam:GetUser
            - iam:GetUserPolicy
            - iam:ListAccessKeys
            - iam:ListAccountAliases
            - iam:ListAttachedRolePolicies
            - iam:ListAttachedUserPolicies
            - iam:ListEntitiesForPolicy
            - iam:ListGroupPolicies
            - iam:ListGroups
            - iam:ListGroupsForUser
            - iam:ListInstanceProfileTags
            - iam:ListInstanceProfiles
            - iam:ListInstanceProfilesForRole
            - iam:ListPolicies
            - iam:ListPolicyTags
            - iam:ListPolicyVersions
            - iam:ListRolePolicies
            - iam:ListRoleTags
            - iam:ListRoles
            - iam:ListUserPolicies
            - iam:ListUserTags
            - iam:ListUsers
            - iam:SimulateCustomPolicy
            - iam:SimulatePrincipalPolicy
            - organizations:DescribeAccount
            - organizations:DescribeEffectivePolicy
            - organizations:DescribeOrganization
            - organizations:DescribeOrganizationalUnit
            - organizations:DescribePolicy
            - organizations:ListAccounts
            - organizations:ListAccountsForParent
            - organizations:ListChildren
            - organizations:ListCreateAccountStatus
            - organizations:ListDelegatedAdministrators
            - organizations:ListDelegatedServicesForAccount
            - organizations:ListHandshakesForAccount
            - organizations:ListHandshakesForOrganization
            - organizations:ListOrganizationalUnitsForParent
            - organizations:ListParents
            - organizations:ListPolicies
            - organizations:ListPoliciesForTarget
            - organizations:ListRoots
            - organizations:ListTagsForResource
            - organizations:ListTargetsForPolicy
            - s3:GetBucketPolicy
            - s3:GetBucketTagging
            - s3:ListAllMyBuckets
            - s3:ListBucket
            - sns:GetTopicAttributes
            - sns:ListTagsForResource
            - sns:ListTopics
            - sqs:GetQueueAttributes
            - sqs:GetQueueUrl
            - sqs:ListQueueTags
            - sqs:ListQueues
          effect: Allow
          resource: '*'
      version: '2012-10-17'
  role_name: NoqSpokeRoleE2E202308

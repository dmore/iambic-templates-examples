template_type: NOQ::AWS::IAM::Role
included_accounts:
  - iambic_test_spoke_account_1
  - iambic_test_spoke_account_2
  - iambic_test_spoke_account_3
identifier: NoqSpokeRoleCorpNoqDev
properties:
  assume_role_policy_document:
    statement:
      - action:
          - sts:AssumeRole
          - sts:TagSession
        effect: Allow
        principal:
          aws: arn:aws:iam::940552945933:role/NoqCentralRoleCorpNoqDev
    version: '2012-10-17'
  inline_policies:
    - included_accounts:
        - iambic_test_spoke_account_1
        - iambic_test_spoke_account_2
      policy_name: spoke-acct-policy
      statement:
        - action:
            - config:BatchGet*
            - config:GetResourceConfigHistory
            - config:List*
            - config:Select*
            - ec2:describeregions
            - iam:AddRoleToInstanceProfile
            - iam:AttachRolePolicy
            - iam:AttachUserPolicy
            - iam:CreateInstanceProfile
            - iam:CreateRole
            - iam:DeleteAccessKey
            - iam:DeleteInstanceProfile
            - iam:DeletePolicy
            - iam:DeletePolicyVersion
            - iam:DeleteRole
            - iam:DeleteRolePermissionsBoundary
            - iam:DeleteRolePolicy
            - iam:DeleteUser
            - iam:DeleteUserPermissionsBoundary
            - iam:DeleteUserPolicy
            - iam:DeleteVirtualMFADevice
            - iam:DetachRolePolicy
            - iam:DetachUserPolicy
            - iam:GenerateCredentialReport
            - iam:GenerateOrganizationsAccessReport
            - iam:GenerateServiceLastAccessedDetails
            - iam:GetAccessKeyLastUsed
            - iam:GetAccountAuthorizationDetails
            - iam:GetAccountSummary
            - iam:GetCredentialReport
            - iam:GetGroup
            - iam:GetGroupPolicy
            - iam:GetInstanceProfile
            - iam:GetPolicy
            - iam:GetPolicyVersion
            - iam:GetRole
            - iam:GetRolePolicy
            - iam:GetServiceLastAccessedDetails
            - iam:GetServiceLastAccessedDetailsWithEntities
            - iam:GetUser
            - iam:GetUserPolicy
            - iam:ListAccessKeys
            - iam:ListAccountAliases
            - iam:ListAttachedRolePolicies
            - iam:ListAttachedUserPolicies
            - iam:ListEntitiesForPolicy
            - iam:ListGroupPolicies
            - iam:ListGroups
            - iam:ListGroupsForUser
            - iam:ListInstanceProfileTags
            - iam:ListInstanceProfiles
            - iam:ListInstanceProfilesForRole
            - iam:ListPolicies
            - iam:ListPolicyTags
            - iam:ListPolicyVersions
            - iam:ListRolePolicies
            - iam:ListRoleTags
            - iam:ListRoles
            - iam:ListUserPolicies
            - iam:ListUserTags
            - iam:ListUsers
            - iam:PassRole
            - iam:PutRolePermissionsBoundary
            - iam:PutRolePolicy
            - iam:PutUserPermissionsBoundary
            - iam:PutUserPolicy
            - iam:RemoveRoleFromInstanceProfile
            - iam:RemoveUserFromGroup
            - iam:SetDefaultPolicyVersion
            - iam:SimulateCustomPolicy
            - iam:SimulatePrincipalPolicy
            - iam:TagInstanceProfile
            - iam:TagPolicy
            - iam:TagRole
            - iam:TagUser
            - iam:UntagInstanceProfile
            - iam:UntagPolicy
            - iam:UntagRole
            - iam:UntagUser
            - iam:UpdateAssumeRolePolicy
            - iam:UpdateRole
            - iam:UpdateRoleDescription
            - iam:UpdateUser
            - organizations:DescribeAccount
            - organizations:DescribeEffectivePolicy
            - organizations:DescribeOrganization
            - organizations:DescribeOrganizationalUnit
            - organizations:DescribePolicy
            - organizations:ListAccounts
            - organizations:ListAccountsForParent
            - organizations:ListChildren
            - organizations:ListCreateAccountStatus
            - organizations:ListDelegatedAdministrators
            - organizations:ListDelegatedServicesForAccount
            - organizations:ListHandshakesForAccount
            - organizations:ListHandshakesForOrganization
            - organizations:ListOrganizationalUnitsForParent
            - organizations:ListParents
            - organizations:ListPolicies
            - organizations:ListPoliciesForTarget
            - organizations:ListRoots
            - organizations:ListTagsForResource
            - organizations:ListTargetsForPolicy
            - organizations:TagResource
            - organizations:UntagResource
            - s3:GetBucketPolicy
            - s3:GetBucketTagging
            - s3:ListAllMyBuckets
            - s3:ListBucket
            - s3:PutBucketPolicy
            - s3:PutBucketTagging
            - sns:GetTopicAttributes
            - sns:ListTagsForResource
            - sns:ListTopics
            - sns:SetTopicAttributes
            - sns:TagResource
            - sns:UnTagResource
            - sqs:GetQueueAttributes
            - sqs:GetQueueUrl
            - sqs:ListQueueTags
            - sqs:ListQueues
            - sqs:SetQueueAttributes
            - sqs:TagQueue
            - sqs:UntagQueue
          effect: Allow
          resource: '*'
      version: '2012-10-17'
    - included_accounts:
        - iambic_test_spoke_account_3
      policy_name: spoke-acct-policy
      statement:
        - action:
            - config:BatchGet*
            - config:GetResourceConfigHistory
            - config:List*
            - config:Select*
            - ec2:describeregions
            - iam:AddRoleToInstanceProfile
            - iam:AttachRolePolicy
            - iam:AttachUserPolicy
            - iam:CreateInstanceProfile
            - iam:CreateRole
            - iam:DeleteAccessKey
            - iam:DeleteInstanceProfile
            - iam:DeletePolicy
            - iam:DeletePolicyVersion
            - iam:DeleteRole
            - iam:DeleteRolePermissionsBoundary
            - iam:DeleteRolePolicy
            - iam:DeleteUser
            - iam:DeleteUserPermissionsBoundary
            - iam:DeleteUserPolicy
            - iam:DeleteVirtualMFADevice
            - iam:DetachRolePolicy
            - iam:DetachUserPolicy
            - iam:GenerateCredentialReport
            - iam:GenerateOrganizationsAccessReport
            - iam:GenerateServiceLastAccessedDetails
            - iam:GetAccessKeyLastUsed
            - iam:GetAccountAuthorizationDetails
            - iam:GetAccountSummary
            - iam:GetCredentialReport
            - iam:GetGroup
            - iam:GetGroupPolicy
            - iam:GetInstanceProfile
            - iam:GetPolicy
            - iam:GetPolicyVersion
            - iam:GetRole
            - iam:GetRolePolicy
            - iam:GetServiceLastAccessedDetails
            - iam:GetServiceLastAccessedDetailsWithEntities
            - iam:GetUser
            - iam:GetUserPolicy
            - iam:ListAccessKeys
            - iam:ListAccountAliases
            - iam:ListAttachedRolePolicies
            - iam:ListAttachedUserPolicies
            - iam:ListEntitiesForPolicy
            - iam:ListGroupPolicies
            - iam:ListGroups
            - iam:ListGroupsForUser
            - iam:ListInstanceProfileTags
            - iam:ListInstanceProfiles
            - iam:ListInstanceProfilesForRole
            - iam:ListPolicies
            - iam:ListPolicyTags
            - iam:ListPolicyVersions
            - iam:ListRolePolicies
            - iam:ListRoleTags
            - iam:ListRoles
            - iam:ListUserPolicies
            - iam:ListUserTags
            - iam:ListUsers
            - iam:PassRole
            - iam:PutRolePermissionsBoundary
            - iam:PutRolePolicy
            - iam:PutUserPermissionsBoundary
            - iam:PutUserPolicy
            - iam:RemoveRoleFromInstanceProfile
            - iam:RemoveUserFromGroup
            - iam:SetDefaultPolicyVersion
            - iam:SimulateCustomPolicy
            - iam:SimulatePrincipalPolicy
            - iam:TagInstanceProfile
            - iam:TagPolicy
            - iam:TagRole
            - iam:TagUser
            - iam:UntagInstanceProfile
            - iam:UntagPolicy
            - iam:UntagRole
            - iam:UntagUser
            - iam:UpdateAssumeRolePolicy
            - iam:UpdateRole
            - iam:UpdateRoleDescription
            - iam:UpdateUser
            - organizations:DescribeAccount
            - organizations:DescribeEffectivePolicy
            - organizations:DescribeOrganization
            - organizations:DescribeOrganizationalUnit
            - organizations:DescribePolicy
            - organizations:ListAccounts
            - organizations:ListAccountsForParent
            - organizations:ListChildren
            - organizations:ListCreateAccountStatus
            - organizations:ListDelegatedAdministrators
            - organizations:ListDelegatedServicesForAccount
            - organizations:ListHandshakesForAccount
            - organizations:ListHandshakesForOrganization
            - organizations:ListOrganizationalUnitsForParent
            - organizations:ListParents
            - organizations:ListPolicies
            - organizations:ListPoliciesForTarget
            - organizations:ListRoots
            - organizations:ListTagsForResource
            - organizations:ListTargetsForPolicy
            - organizations:TagResource
            - organizations:UntagResource
            - s3:GetBucketPolicy
            - s3:GetBucketTagging
            - s3:ListAllMyBuckets
            - s3:ListBucket
            - s3:PutBucketPolicy
            - s3:PutBucketTagging
            - sns:GetTopicAttributes
            - sns:ListTagsForResource
            - sns:ListTopics
            - sns:SetTopicAttributes
            - sns:TagResource
            - sns:UnTagResource
            - sqs:GetQueueAttributes
            - sqs:GetQueueUrl
            - sqs:ListQueueTags
            - sqs:ListQueues
            - sqs:SetQueueAttributes
            - sqs:TagQueue
            - sqs:UntagQueue
          effect: Allow
          resource: '*'
      version: '2012-10-17'
  role_name: NoqSpokeRoleCorpNoqDev
  tags:
    - included_accounts:
        - iambic_test_spoke_account_3
      key: noq-authorized
      value: engineering@noq.dev
    - included_accounts:
        - iambic_test_spoke_account_3
      key: noq-authorized-cli-only
      value: ''
